name: Manual Release
on:
  workflow_dispatch:
    inputs:
      branch:
        description: Branch name
        required: true
        type: string
        default: 'main'
      version:
        description: Version
        required: true
        type: string
        default: '16.0.27'
jobs:
  change-version:
    uses: ./.github/workflows/change-module-version.yml
    with:
      branch: ${{ github.event.inputs.branch}}
      version: ${{ github.event.inputs.version }}
#  build-and-publish:
#    name: Package the all components
#    runs-on: ubuntu-latest
#    steps:
#      - name: Check out the repo
#        uses: actions/checkout@v3
#      - name: Echo inputs
#        run: |
#          echo "Branch: ${{ github.event.inputs.branch }}"
#          echo "Version: ${{ github.event.inputs.version }}"
#      - name: Setup python
#        uses: actions/setup-python@v3
#        with:
#          python-version: '3.9'
#          architecture: 'x64'
#      - name: Setup poetry
#        run: |
#          python -m pip install --upgrade pip
#          pip install poetry
#      - name: Package [watchmen-utilities] and publish to Pypi
#        working-directory: ./packages/watchmen-utilities
#        run: |
#          poetry build
##          poetry publish -u '${{ secrets.PIP_USERNAME }}' -p '${{ secrets.PIP_PASSWORD }}''
#      - name: Package [watchmen-model] and publish to Pypi
#        working-directory: ./packages/watchmen-model
#        run: |
#          poetry build
##          poetry publish -u '${{ secrets.PIP_USERNAME }}' -p '${{ secrets.PIP_PASSWORD }}''
#      - name: Package [watchmen-storage] and publish to Pypi
#        working-directory: ./packages/watchmen-storage
#        run: |
#          poetry build
##          poetry publish -u '${{ secrets.PIP_USERNAME }}' -p '${{ secrets.PIP_PASSWORD }}''
#      - name: Package [watchmen-storage-mongodb] and publish to Pypi
#        working-directory: ./packages/watchmen-storage-mongodb
#        run: |
#          poetry build
##          poetry publish -u '${{ secrets.PIP_USERNAME }}' -p '${{ secrets.PIP_PASSWORD }}''
#      - name: Package [watchmen-storage-mssql] and publish to Pypi
#        working-directory: ./packages/watchmen-storage-mssql
#        run: |
#          poetry build
##          poetry publish -u '${{ secrets.PIP_USERNAME }}' -p '${{ secrets.PIP_PASSWORD }}''
#      - name: Package [watchmen-storage-mysql] and publish to Pypi
#        working-directory: ./packages/watchmen-storage-mysql
#        run: |
#          poetry build
##          poetry publish -u '${{ secrets.PIP_USERNAME }}' -p '${{ secrets.PIP_PASSWORD }}''
#      - name: Package [watchmen-storage-oracle] and publish to Pypi
#        working-directory: ./packages/watchmen-storage-oracle
#        run: |
#          poetry build
##          poetry publish -u '${{ secrets.PIP_USERNAME }}' -p '${{ secrets.PIP_PASSWORD }}''
#      - name: Package [watchmen-auth] and publish to Pypi
#        working-directory: ./packages/watchmen-auth
#        run: |
#          poetry build
##          poetry publish -u '${{ secrets.PIP_USERNAME }}' -p '${{ secrets.PIP_PASSWORD }}''
#      - name: Package [watchmen-rest] and publish to Pypi
#        working-directory: ./packages/watchmen-rest
#        run: |
#          poetry build
##          poetry publish -u '${{ secrets.PIP_USERNAME }}' -p '${{ secrets.PIP_PASSWORD }}''
#      - name: Package [watchmen-meta] and publish to Pypi
#        working-directory: ./packages/watchmen-meta
#        run: |
#          poetry build
##          poetry publish -u '${{ secrets.PIP_USERNAME }}' -p '${{ secrets.PIP_PASSWORD }}''
#      - name: Package [watchmen-data-kernel] and publish to Pypi
#        working-directory: ./packages/watchmen-data-kernel
#        run: |
#          poetry build
##          poetry publish -u '${{ secrets.PIP_USERNAME }}' -p '${{ secrets.PIP_PASSWORD }}''
#      - name: Package [watchmen-data-surface] and publish to Pypi
#        working-directory: ./packages/watchmen-data-surface
#        run: |
#          poetry build
##          poetry publish -u '${{ secrets.PIP_USERNAME }}' -p '${{ secrets.PIP_PASSWORD }}''
#      - name: Package [watchmen-pipeline-kernel] and publish to Pypi
#        working-directory: ./packages/watchmen-pipeline-kernel
#        run: |
#          poetry build
##          poetry publish -u '${{ secrets.PIP_USERNAME }}' -p '${{ secrets.PIP_PASSWORD }}''
#      - name: Package [watchmen-pipeline-surface] and publish to Pypi
#        working-directory: ./packages/watchmen-pipeline-surface
#        run: |
#          poetry build
##          poetry publish -u '${{ secrets.PIP_USERNAME }}' -p '${{ secrets.PIP_PASSWORD }}''
#      - name: Package [watchmen-inquiry-trino] and publish to Pypi
#        working-directory: ./packages/watchmen-inquiry-trino
#        run: |
#          poetry build
##          poetry publish -u '${{ secrets.PIP_USERNAME }}' -p '${{ secrets.PIP_PASSWORD }}''
#      - name: Package [watchmen-inquiry-kernel] and publish to Pypi
#        working-directory: ./packages/watchmen-inquiry-kernel
#        run: |
#          poetry build
##          poetry publish -u '${{ secrets.PIP_USERNAME }}' -p '${{ secrets.PIP_PASSWORD }}''
#      - name: Package [watchmen-inquiry-surface] and publish to Pypi
#        working-directory: ./packages/watchmen-inquiry-surface
#        run: |
#          poetry build
##          poetry publish -u '${{ secrets.PIP_USERNAME }}' -p '${{ secrets.PIP_PASSWORD }}''
#      - name: Package [watchmen-rest-doll] and publish to Pypi
#        working-directory: ./packages/watchmen-rest-doll
#        run: |
#          poetry build
##          poetry publish -u '${{ secrets.PIP_USERNAME }}' -p '${{ secrets.PIP_PASSWORD }}''
#      - name: Package [watchmen-dqc] and publish to Pypi
#        working-directory: ./packages/watchmen-dqc
#        run: |
#          poetry build
##          poetry publish -u '${{ secrets.PIP_USERNAME }}' -p '${{ secrets.PIP_PASSWORD }}''
#      - name: Package [watchmen-rest-dqc] and publish to Pypi
#        working-directory: ./packages/watchmen-rest-dqc
#        run: |
#          poetry build
##          poetry publish -u '${{ secrets.PIP_USERNAME }}' -p '${{ secrets.PIP_PASSWORD }}''
#      - name: Package [watchmen-cli] and publish to Pypi
#        working-directory: ./packages/watchmen-cli
#        run: |
#          poetry build
##          poetry publish -u '${{ secrets.PIP_USERNAME }}' -p '${{ secrets.PIP_PASSWORD }}''
